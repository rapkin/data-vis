# API

Опис структури API.

 * `"..."` - позначка одиничних данних.
 * `{"...."}` - позначка повторюваних данних.
 * `"<name>"` - підстановка поля з ключом _name_

## Отримання данних

### GET /config/
Віддає config.json

__Response:__

```json
{
    "token": "...",
    "center": [48.8, 31.2],
    "zoom": 6
}
```

### GET /cities/
Віддає список всіх міст

__Response:__

```json
{
    "list": [
        {
            "id": 1,
            "name": "Київ",
            "lat": 50.447,
            "lon": 30.550
        },
        {"...."}
    ]
}
```

### GET /data_sets/
Віддає список всіх наборів данних

__Response:__

```json
{
    "sets": [
        {
            "id": 1,
            "name": "Народжуваність"
        },
        {"...."}
    ]
}
```

### GET /data_entries/?sets=34,2,23&cities=32,45&after=43244324&before=323243
Віддає всі данні по наборах данних
(Передбачити пагінацію)

Якщо якесь поле відсутнє (або null), то не враховувати при вибірці. Також якщо передано пусте тіло (не предано жодного фільтру), то проведеться вибірка усіх данних.

Список фільтрів:
 * `sets` - список ID наборів данних
 * `cities` - список ID міст
 * `after` / `before` - верхня / нижня часова межа вибірки

__Response:__

```json
{
    "data": [
        {
            "id": 1,
            "value": 42,
            "time": 1458421488,
            "set_id": 1,
            "city_id": 1
        },
        {"...."}
    ]
}
```

### PUT /cities/
Створює нове місто (потрібно передати назву та координати).
Всі три поля є обов'язковими

__Request:__

```json
{
    "name": "...",
    "lat": 50.447,
    "lon": 30.550
}
```

__Response:__

```json
{
    "id": 1,
    "name": "...",
    "lat": 50.447,
    "lon": 30.550
}
```

### POST /cities/
Зберігає існуюче місто.

`id` - обовязковий параметр.
Також обов'язково має передаватись один з інших параметрів.

__Request:__

```json
{
    "id": 1,
    "name": "..."
}
```

__Response:__

```json
{
    "id": 1,
    "name": "...",
    "lat": 50.447,
    "lon": 30.550
}
```
